{% extends "GsbBundle:Template:Template.html.twig"%}

{% block title %}
    Details fiche de frais
{% endblock %}

{% block body %}
<div class="row">
    
    {% if app.session.get("typeUtilisateur") == "comptable" %}
        <dl class="dl-horizontal">
            <dt>Visiteur</dt>
            <dd>{{fiche.visiteur.nom}} {{fiche.visiteur.prenom}}</dd>
        </dl>
    {% endif%}
    
    <dl class="dl-horizontal">
        <dt>date</dt>
        <dd>{{fiche.mois}}/{{fiche.annee}}</dd>
    </dl>
    
    <dl class="dl-horizontal">
        <dt>Dernière modification</dt>
        <dd>{{fiche.dateModif|date('d/m/y')}}</dd>
    </dl>
    
    <dl class="dl-horizontal">
        <dt>Etat</dt>
        <dd>{{fiche.etat.libelle}}</dd>
    </dl>
    
    {# version tableau
    <table class="table table-bordered">
        <tr>
            <td>date</td>
            <td>{{fiche.mois}}/{{fiche.annee}}</td>
        </tr>
        
        <tr>
            <td>Dernière modification</td>
            <td>{{fiche.dateModif}}</td>
        </tr>
        <tr>
            <td>Etat</td>
            <td>{{fiche.etat}}</td>
        </tr>
    </table>
    #}
    <h1>Frais au Forfait</h1>
            
    <table class="table table-bordered">    
        
        <th>Frais</th>
        <th>a l'unite</th>
        <th>quantite</th>
        <th>montant total</th>
        {% for ligneF in fiche.LigneFraisForfait %}
        <tr>
            <td>{{ligneF.fraisForfait.libelle}}</td>
            <td>{{ligneF.fraisForfait.montant}}</td>
            <td>{{ligneF.quantite}}</td>
            <td>{{ligneF.quantite * ligneF.fraisForfait.montant}}</td>
        </tr>   
        
        {% endfor%}
    </table>
        
            
    <h1>Frais Hors Forfait</h1>
            
    <table class="table table-bordered">    
        <th>libelle</th>
        <th>date</th>
        <th>montant</th>
        <th>etat</th>
        <th>options</th>
        {% for ligneHF in fiche.LigneFraisHorsForfait %}
        <tr>
            <td>{{ligneHF.libelle}}</td>
            <td>{{ligneHF.dateFrais.format("d/m/y")}}</td>
            <td>{{ligneHF.montant}}</td>
            <td>{{ligneHF.etat.libelle}}</td>
            {% if ligneHF.etat.libelle == "A VALIDER" %}
                <td>
                    <button class="btn btn-success">Valider</button>
                    <button class="btn btn-danger">Refuser</button>
                </td>
            {% endif %}
        </tr>   
        
        {% endfor%}
    </table>    
    
    <button class="btn btn-success">Valider</button>
    
    <a href="{{ path("gsb_consulterHistorique") }}">
        <button class="btn btn-primary">Retour</button>
    </a>
    
    
</div>
{% endblock %}